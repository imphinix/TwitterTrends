<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        TwitterTrends | Dashboard
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <!-- CSS Files -->
    <link href="{% static 'assets-2/css/bootstrap.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets-2/css/paper-dashboard.css '%}" rel="stylesheet" />
    <link href="{% static 'assets-2/fonts/ionicons.min.css '%}" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="{% static 'assets-2/demo/demo.css' %}" rel="stylesheet" />
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
</head>

<body class="">
    <div class="wrapper ">
        <div class="sidebar" data-active-color="danger">
            <div class="logo">
                <a href="" class="simple-text logo-mini">
                    <div class="logo-image-small">
                        <img src="{% static 'assets-2/img/logo-small.png '%}">
                    </div>
                </a>
                <a href="" class="simple-text logo-normal">
                    {{user.username}}
                </a>
            </div>
            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li class="active">
                        <a href="dashboard">
                            <i class="nc-icon nc-bank"></i>
                            <p>Dashboard</p>
                        </a>
                    </li>
                    <li>
                        <a href="profile">
                            <i class="nc-icon nc-bank"></i>
                            <p>Profile</p>
                        </a>
                    </li>
                    <li>
                        <a href="logout">
                            <i class="nc-icon nc-diamond"></i>
                            <p>Logout</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main-panel">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent">
                <div class="container-fluid">
                    <div class="navbar-wrapper">
                        <div class="navbar-toggle">
                            <button type="button" class="navbar-toggler">
                                <span class="navbar-toggler-bar bar1"></span>
                                <span class="navbar-toggler-bar bar2"></span>
                                <span class="navbar-toggler-bar bar3"></span>
                            </button>
                        </div>
                        <a class="navbar-brand" href="#pablo">Dashboard</a>
                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-bar navbar-kebab"></span>
                        <span class="navbar-toggler-bar navbar-kebab"></span>
                        <span class="navbar-toggler-bar navbar-kebab"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navigation">
                        <form>
                            <div class="input-group no-border">
                                <input type="text" value="" class="form-control" placeholder="Enter Keyword ...">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <i class="nc-icon nc-zoom-split"></i>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </nav>

            <div class="content">
                                <a class="btn btn-primary btn-sm d-none d-sm-inline-block" role="button" href="#">
                    Generate Report
                </a>
                <div class="text-uppercase text-info font-weight-bold text-xs mb-1">
                    <span style="font-size: 16px;">Results for :: {{keyword}}</span>
                </div>
                <div class="row">
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-body ">
                                <div class="row">
                                    <div class="col-5 col-md-4">
                                        <div class="icon-big text-center icon-warning">
                                            <i class="nc-icon nc-globe text-warning"></i>
                                        </div>
                                    </div>
                                    <div class="col-7 col-md-8">
                                        <div class="numbers">
                                            <p class="card-category">Total Posts</p>
                                            <p class="card-title">{{total_post}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-body ">
                                <div class="row">
                                    <div class="col-5 col-md-4">
                                        <div class="icon-big text-center icon-warning">
                                            <i class="nc-icon nc-money-coins text-success"></i>
                                        </div>
                                    </div>
                                    <div class="col-7 col-md-8">
                                        <div class="numbers">
                                            <p class="card-category">Total Users</p>
                                            <p class="card-title">{{total_user}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-body ">
                                <div class="row">
                                    <div class="col-5 col-md-4">
                                        <div class="icon-big text-center icon-warning">
                                            <i class="nc-icon nc-vector text-danger"></i>
                                        </div>
                                    </div>
                                    <div class="col-7 col-md-8">
                                        <div class="numbers">
                                            <p class="card-category">Total Reach</p>
                                            <p class="card-title">{{total_reach}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6">
                        <div class="card card-stats">
                            <div class="card-body ">
                                <div class="row">
                                    <div class="col-5 col-md-4">
                                        <div class="icon-big text-center icon-warning">
                                            <i class="nc-icon nc-favourite-28 text-primary"></i>
                                        </div>
                                    </div>
                                    <div class="col-7 col-md-8">
                                        <div class="numbers">
                                            <p class="card-category">Impression</p>
                                            <p class="card-title">-</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="card shadow border-left-info py-2">
                            <div class="card-body">
                                <div class="row align-items-center no-gutters">
                                    <div class="col mr-2">
                                        <div class="text-uppercase text-info font-weight-bold text-xs mb-1">
                                            <span style="font-size: 16px;">Sentiment Anaylysis</span>
                                        </div>
                                        <i class="ion-android-happy" style="font-size: 30px;color: green;"></i>
                                        {% comment %} <i class='far fa-meh-blank'  style='font-size:30px; color:yellow;position: absolute;left: 50%;'></i> {% endcomment %}
                                        <i class="ion-android-sad" style="position: absolute; font-size: 30px;right: 0;color: red;"></i>
                                        <div class="row no-gutters align-items-center">
                                            <div class="col-auto">
                                                <div class="text-dark font-weight-bold h5 mb-0 mr-3">
                                                    <span>{{pv}}%</span>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="progress progress-sm">
                                                    <div class="progress-bar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: {{pv}}%; background-color: green;"></div>
                                                    <div class="progress-bar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: {{nv}}%; background-color: red;"></div>
                                                </div>
                                            </div>
                                            <div style="margin-left: 20px;">
                                                <div class="text-dark font-weight-bold h5 mb-0">
                                                    <span>{{nv}}%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-sm-6 col-md-6">
                        <div class="card shadow border-left-info py-2">
                            <div class="card-body">
                                {% comment %} {% include "topUsedHashtags.html" %} {% endcomment %}
                                <div>
                                    <div style="display: flex;justify-content: center;align-items: center;">
                                        <canvas id="topUsedHashtags" width="1000" height="1000"></canvas>
                                    </div>          
                                </div>
                           </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-6">
                        <div class="card shadow border-left-info py-2">
                            <div class="card-body">
                                {% comment %} {% include "topLanguages.html" %} {% endcomment %}
                                <div>
                                    <div style="display: flex;justify-content: center;align-items: center;">
                                        <canvas id="topLanguages" width="1000" height="1000"></canvas>
                                    </div>  
                                </div>
                           </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-6">
                        <div class="card shadow border-left-info py-2">
                            <div class="card-body">
                                {% comment %} {% include "rtorgRatio.html" %} {% endcomment %}
                                <div>
                                    <div style="display: flex;justify-content: center;align-items: center;">
                                        <canvas id="rtorg" width="1000" height="1000"></canvas>
                                    </div>
                                </div>
                           </div>
                        </div>
                    </div>  
                </div>
            </div>
        </div>
    </div>
    <!--   Core JS Files   -->
    <script src="{% static 'assets-2/js/core/jquery.min.js' %}"></script>
    <!-- chart js file-->
    <script src="{% static 'assets-2/js/core/Chart.bundle.min.js' %}"></script>
    <script src="{% static 'assets-2/js/core/popper.min.js' %}"></script>
    <script src="{% static 'assets-2/js/core/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets-2/js/plugins/perfect-scrollbar.jquery.min.js' %}"></script>
    <!--  Notifications Plugin    -->
    <script src="{% static 'assets-2/js/plugins/bootstrap-notify.js' %}"></script>
    <!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="{% static 'assets-2/js/paper-dashboard.min.js' %}" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            // Javascript method's body can be found in assets/assets-for-demo/js/demo.js
            demo.initChartsPages();
        });
    </script>

    <!-- retweet original ratio -->
    <!-- ############################################################################################### -->
    <script>
        $.ajax({
                    method:'GET',
                    url:'data/v'+"{{version}}",
                    success:function(data){
                        console.log(data);
                        new Chart(document.getElementById("rtorg"), {
                            type: 'doughnut',
                            data: {
                                labels: ["Rtweet","Original"],
                                datasets: [
                                    {
                                        label: "Retweet Original Count",
                                         backgroundColor: ["#3e95cd", "#8e5ea2"],
                                        data: data.rtorgRatio,
                                    },
                                ]
                            },
                            options: {
                                title: {
                                    display : true,
                                    text : "Retweet Original Count",
                                    fontSize : 22.0
                                 },
                                responsive: true,
                            }
                        });
                    },
                    error:function(data){
                        console.log('Error!');
                    }
                });
    </script>
    <!-- ############################################################################################### -->

    <!-- top languages -->
    <!-- ############################################################################################### -->
    <script>
        $.ajax({
            method:'GET',
            url:'data/v'+"{{version}}",
            success:function(data){
                console.log(data);
                new Chart(document.getElementById("topLanguages"), {
                    type: 'bar',
                    data: {
                        //labels:{{topLanguages}},
                        labels: data.languages,
                        datasets: [
                            {
                                label: "Languages count",
                                backgroundColor: "rgba(62, 149, 205, 0.5)",
                                borderColor : "rgba(62, 149, 205, 1)",
                                pointBackgroundColor: "rgba(62, 149, 205, 1)",
                                //data: topLanguagesCount,
                                data: data.languages_count,
                            },
                        ]
                    },
                    options: {
                        legend: {
                            labels: {
                                fontSize: 18
                            }
                        },
                        title: {
                            display : true,
                            text : "Top 5 Used Languages",
                            fontSize : 22.0
                         },
                        scales: {
                            yAxes: [{
                                ticks:{
                                    beginAtZero: true,
                                    fontSize:15.0,
                                },
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Count',
                                    fontSize :20.0,
                                }
                            }],
                            xAxes: [{
                                ticks:{
                                  fontSize: 15.0,
                                },
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Languages',
                                    fontSize : 20.0,
                                }
                            }]
                          },
                        responsive: true,
                    }
                });
            },
            error:function(data){
                console.log('Error!');
            }
        });
    </script>
    <!-- ############################################################################################### -->

    <!-- top hashtags used -->
    <!-- ############################################################################################### -->
    <script>
        $.ajax({
            method:'GET',
            url:'data/v'+"{{version}}",
            success:function(data){

                new Chart(document.getElementById("topUsedHashtags"), {
                    type: 'bar',
                    data: {
                        labels: data.hashtags,
                        datasets: [
                            {
                                label: "hashtag count",
                                backgroundColor: [
                                    "#aec7e8", "#ffbb78", "#d62728 ", "#98df8a ", "#1f77b4", "#ff7f0e ", "#2ca02c ",
                                    "#FF6380","#FF0000","#40E0D0","#FA8072","#339905","#98FB98","#FF8C00","#00FA9A",
                                    "#DC143C","#FF1493","#FF69B4","#F08080","#FFA500","#FF4500"],
                                borderColor : "rgba(62, 149, 205, 1)",
                                pointBackgroundColor: "rgba(62, 149, 205, 1)",
                                data: data.hashtags_count,
                            },
                        ]
                    },
                    options: {
                        legend: {
                            labels: {
                                fontSize: 18
                            }
                        },
                        title: {
                            display : true,
                            text : "Top 5 Used Hashtags ",
                            fontSize : 22.0
                         },
                        scales: {
                            yAxes: [{
                                ticks:{
                                    beginAtZero: true,
                                    fontSize:15.0,
                                },
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Count',
                                    fontSize :20.0,
                                }
                            }],
                            xAxes: [{
                                ticks:{
                                  fontSize: 15.0,
                                },
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Hashtags',
                                    fontSize : 20.0,
                                }
                            }]
                          },
                        responsive: true,
                    }
                });
            },
            error:function(data){
                console.log('Error!');
            }
        });
    </script>
    <!-- ############################################################################################### -->
</body>

</html>
